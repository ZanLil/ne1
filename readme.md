## Задание: Создать новостной портал, используя фреймворк Django.
1. Модель Author.  
   Модель, содержащая объекты всех авторов.
   Имеет следующие поля:
   - cвязь «один к одному» с встроенной моделью пользователей User;
   - рейтинг пользователя. Ниже будет дано описание того, как этот рейтинг можно посчитать. 
2. Модель Category.  
Категории новостей/статей — темы, которые они отражают (спорт, политика, образование и т. д.). Имеет единственное поле: 
название категории. Поле должно быть уникальным (в определении поля необходимо написать параметр unique = True). 
3. Модель Post.  
Эта модель должна содержать в себе статьи и новости, которые создают пользователи. Каждый объект может иметь одну или 
несколько категорий.
   Соответственно, модель должна включать следующие поля:
   - связь «один ко многим» с моделью Author;
   - поле с выбором — «статья» или «новость»;
   - автоматически добавляемая дата и время создания;
   - связь «многие ко многим» с моделью Category (с дополнительной моделью PostCategory);
   - заголовок статьи/новости;
   - текст статьи/новости;
   - рейтинг статьи/новости. 
4. Модель PostCategory.  
Промежуточная модель для связи «многие ко многим»:
   - связь «один ко многим» с моделью Post;
   - связь «один ко многим» с моделью Category. 
5. Модель Comment.  
Под каждой новостью/статьёй можно оставлять комментарии, поэтому необходимо организовать их способ хранения тоже.
   Модель будет иметь следующие поля:
   - связь «один ко многим» с моделью Post;
   - связь «один ко многим» со встроенной моделью User (комментарии может оставить любой пользователь, необязательно автор);
   - текст комментария;
   - дата и время создания комментария;
   - рейтинг комментария.
6. Эти модели должны также реализовать методы:
   - Методы like() и dislike() в моделях Comment и Post, которые увеличивают/уменьшают рейтинг на единицу.
   - Метод preview() модели Post, который возвращает начало статьи (предварительный просмотр) длиной 124 символа и добавляет многоточие в конце.
   - Метод update_rating() модели Author, который обновляет рейтинг текущего автора (метод принимает в качестве аргумента только self).
Он состоит из следующего:
   - суммарный рейтинг каждой статьи автора умножается на 3;
   - суммарный рейтинг всех комментариев автора;
   - суммарный рейтинг всех комментариев к статьям автора.
7. Создать новую страницу с адресом /news/, на которой должен выводиться список всех новостей. 
8. Вывести все статьи в виде заголовка, даты публикации и первых 20 символов текста. 
9. Новости должны выводиться в порядке от более свежей к самой старой. 
10. Сделать отдельную страницу для полной информации о статье /news/<id новости>. На этой странице должна быть вся 
информация о статье. Название, текст и дата загрузки в формате день.месяц.год.
11. Написать собственный фильтр censor, который заменяет буквы нежелательных слов в заголовках и текстах статей на символ «*». 
12. Все новые страницы должны использовать шаблон default.html как основу.
13. Добавьте постраничный вывод на /news/, чтобы на одной странице было не больше 10 новостей и видны номера лишь 
ближайших страниц, а также возможность перехода к первой или последней странице. 
14. Добавьте страницу /news/search. На ней должна быть реализована возможность искать новости по определённым критериям. 
    Критерии должны быть следующие:
    - по названию;
    - по категории;
    - позже указываемой даты. 
15. Убедитесь, что можно выполнить фильтрацию сразу по нескольким критериям.
16. Запрограммируйте страницы создания, редактирования и удаления новостей и статей. Предлагаем вам расположить страницы 
по следующим ссылкам:
    - /news/create/
    - /news/<int:pk>/edit/
    - /news/<int:pk>/delete/
    - /articles/create/
    - /articles/<int:pk>/edit/
    - /articles/<int:pk>/delete/
17. В классе-представлении редактирования профиля добавить проверку аутентификации. 
18. Выполнить необходимые настройки пакета allauth в файле конфигурации. 
19. В файле конфигурации определить адрес для перенаправления на страницу входа в систему и адрес перенаправления после успешного входа. 
20. Реализовать шаблон с формой входа в систему и выполнить настройку конфигурации URL. 
21. Реализовать шаблон страницы регистрации пользователей. 
22. Реализовать возможность регистрации через Google-аккаунт. 
23. Создать группы common и authors. 
24. Реализовать автоматическое добавление новых пользователей в группу common. 
25. Создать возможность стать автором (быть добавленным в группу authors). 
26. Для группы authors предоставить права создания и редактирования объектов модели Post (новостей и статей). 
27. В классах-представлениях добавления и редактирования новостей и статей добавить проверку прав доступа.
28. В категории должна быть возможность пользователей подписываться на рассылку новых статей. 
29. Если пользователь подписан на какую-либо категорию, то, как только в неё добавляется новая статья, её краткое 
содержание приходит пользователю на электронную почту, которую он указал при регистрации. В письме обязательно должна 
быть гиперссылка на саму статью, чтобы он мог по клику перейти и прочитать её. 
30. Если пользователь подписан на какую-либо категорию, то каждую неделю ему приходит на почту список новых статей, 
появившийся за неделю с гиперссылкой на них, чтобы пользователь мог перейти и прочесть любую из статей. 
31. Добавьте приветственное письмо пользователю при регистрации в приложении.
32. В консоль должны выводиться все сообщения уровня DEBUG и выше, включающие время, уровень сообщения, сообщения. 
Для сообщений WARNING и выше дополнительно должен выводиться путь к источнику события (используется аргумент pathname 
в форматировании). А для сообщений ERROR и CRITICAL еще должен выводить стэк ошибки (аргумент exc_info). 
Сюда должны попадать все сообщения с основного логгера django. 
33. В файл general.log должны выводиться сообщения уровня INFO и выше только с указанием времени, уровня логирования, 
модуля, в котором возникло сообщение (аргумент module) и само сообщение. Сюда также попадают сообщения с регистратора django. 
34. В файл errors.log должны выводиться сообщения только уровня ERROR и CRITICAL. В сообщении указывается время, уровень
логирования, само сообщение, путь к источнику сообщения и стэк ошибки. В этот файл должны попадать сообщения только из 
логгеров django.request, django.server, django.template, django.db.backends. 
35. В файл security.log должны попадать только сообщения, связанные с безопасностью, а значит только из логгера 
django.security. Формат вывода предполагает время, уровень логирования, модуль и сообщение. 
36. На почту должны отправляться сообщения уровней ERROR и выше из django.request и django.server по формату, как в 
errors.log, но без стэка ошибок. 
37. При помощи фильтров нужно указать, что в консоль сообщения отправляются только при DEBUG = True, а на почту и в файл 
general.log — только при DEBUG = False.

### В проекте применены

- Django 4
- библиотека django-allauth
- django-bootstrap 4
- django-filter
- база данных SQLite

### Установка и запуск среды разработки backend Django

Клонируем репозиторий:  
git clone https://github.com/aerastov/SkillFactory_D13.git 

В папке проекта создаем виртуальное окружение:
py -m venv venv
venv\scripts\activate

Устанавливаем библиотеки, необходимые для работы проекта:  
pip install -r requirements.txt

В консоли переходим в директорию проекта и запускаем его:  
python manage.py runserver

Проект будет доступен по адресу:  
http://127.0.0.1:8000

### Запуск проекта через Docker
Установка Docker, если необходимо:  
Для lunix систем:   
```curl -fsSL https://get.docker.com/ | sh```  
Для Windows или Macos ставим Docker Desktop:  
```https://www.docker.com/```  

Запускаем проект в Docker:
docker build -t news_portal . && docker run -d -p 8000:8000 news_portal  



<br/><br/>
___
Автор проекта: **Ерастов Алексей Сергеевич**  
e-mail: a.erastov@gmail.com  
Группа SkillFactory: FPW-62  
Москва, 2022г.  
*Refactoring 2023г. (version update, readme, adding docker.)
